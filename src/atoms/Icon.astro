---
interface Props {
  name: 'cart' | 'search' | 'user' | 'menu' | 'close' | 'check' | 'chevron-down' | 'loader';
  size?: 'small' | 'medium' | 'large';
  color?: string;
  class?: string;
}

const { name, size, color, class: className } = Astro.props;

const icons: Record<string, string> = {
  cart: '<circle cx="9" cy="21" r="1" /><circle cx="20" cy="21" r="1" /><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />',
  search: '<circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" />',
  user: '<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" />',
  menu: '<line x1="3" y1="12" x2="21" y2="12" /><line x1="3" y1="6" x2="21" y2="6" /><line x1="3" y1="18" x2="21" y2="18" />',
  close: '<line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />',
  check: '<polyline points="20 6 9 17 4 12" />',
  'chevron-down': '<polyline points="6 9 12 15 18 9" />',
  loader: '<path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83" />'
};

const svgContent = icons[name];

const classes = [
  'icon',
  size && `is-${size}`,
  color && `has-text-${color}`,
  className
].filter(Boolean).join(' ');
---

<span class={classes}>
  <svg
    viewBox="0 0 24 24"
    width="24"
    height="24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
    class={name === 'loader' ? 'fa-spin' : ''}
    set:html={svgContent}
  />
</span>

<style>
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  .fa-spin {
    animation: spin 2s linear infinite;
  }
</style>
